var e,t,a=Object.defineProperty,o=Object.defineProperties,n=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(e,t,o)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,c=(e,t)=>{for(var a in t||(t={}))i.call(t,a)&&l(e,a,t[a]);if(r)for(var a of r(t))s.call(t,a)&&l(e,a,t[a]);return e},u=(e,t)=>o(e,n(t));import{d,r as p,a as m,o as g,c as f,b as h,e as _,f as b,w as v,g as y,h as S,i as k,u as P,j as w,l as C,k as O,m as x,n as j,p as L,q as I,t as T,s as E,v as M,x as A,E as z,y as R,z as V,A as $,B as D,C as U,D as q,F as B,G as F,H as N,I as W,J as G,K as H,L as Y,M as J,N as X,O as Q,P as Z,Q as K,R as ee,S as te,T as ae,U as oe,V as ne,W as re,X as ie,Y as se,Z as le}from"./vendor.619b4049.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var ce=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}));const ue={},de=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/admin/${e}`)in ue)return;ue[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},pe=()=>de((()=>import("./index.7f58a13f.js")),["assets/index.7f58a13f.js","assets/index.4222434c.css","assets/vendor.619b4049.js","assets/index.3d225aa2.js","assets/index.8f66a87b.css","assets/index.b1851344.js","assets/index.86e1cba5.css"]),me=e=>()=>de((()=>import("./index.b1851344.js")),["assets/index.b1851344.js","assets/index.86e1cba5.css","assets/vendor.619b4049.js"]),ge={getString(e){if(e)return window.localStorage.getItem(e)},setString(e,t){if(e)return window.localStorage.setItem(e,t),{[e]:t}},getObject(e){if(!e)return;const t=this.getString(e);return t?JSON.parse(t,((e,t)=>{const a=t?t.toString().match(/function[^(]*\(([^)]*)\)\s*\{([\s\S]*)\}/):"";if(a){const e=a[1].split(",").map((e=>e.trim()));return new Function(e,a[2])}return t})):void 0},setObject(e,t,a=!1,o={type:"excepts",patterns:[]}){if(e)return t="object"==typeof t?JSON.stringify(t,((e,t)=>(t=-1!==o.patterns.indexOf(e)?"excepts"===o.type?void 0:t:"excepts"===o.type?t:void 0,a&&"function"==typeof t?t.toString():t))):"",this.setString(e,t)},remove(e){e&&window.localStorage.removeItem(e)},clear(){window.localStorage.clear()}};var fe,he;(he=fe||(fe={})).BASE_LOGIN="/login",he.BASE_HOME="/";var _e=(e,t)=>{const a=e.__vccOpts||e;for(const[o,n]of t)a[o]=n;return a};const be={class:"login",style:{"margin-top":"50px"}},ve={class:"login-herder cb-text-center",style:{"margin-bottom":"50px","margin-top":"30px"}},ye=y(" 管理平台 "),Se={key:0,class:"login-herder-avatar cb-m-t-20 cb-m-b-50"},ke=["src"],Pe={class:"login-form"},we={class:"login-btn"},Ce=y("登录");const Oe=d({components:{CLoginForm:_e(d({__name:"CLoginForm",props:{logo:{type:String,default:()=>""}},emits:["onSuccess"],setup(e,{emit:t}){const a=p(null),o=p(!1),n=m({username:"",password:""}),r=m({username:[{required:!0,message:"请输入账号密码",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]});g((()=>{const e=ge.getString("loginFromData"),t=ge.getString("loginCheck");if(e){const{username:t,password:a}=JSON.parse(e);n.username=t,n.password=a}t&&(o.value="1"===t)}));const i=async()=>{a.value&&await a.value.validate(((e,a)=>{e&&Lt().user.login(c({},n)).then((({err_code:e,data:a})=>{e||(t("onSuccess",a),o.value?(ge.setString("loginFromData",JSON.stringify(n)),ge.setString("loginCheck","1")):(ge.setString("loginFromData",""),ge.setString("loginCheck","")))})).catch((e=>{}))}))};return(t,o)=>{const s=S("el-input"),l=S("el-form-item"),c=S("el-form"),u=S("el-button");return k(),f("div",be,[h("div",ve,[ye,e.logo?(k(),f("div",Se,[h("img",{src:e.logo,class:"img cb-w-h-90",alt:"logo"},null,8,ke)])):_("",!0)]),h("div",Pe,[b(c,{ref_key:"formRef",ref:a,model:n,rules:r},{default:v((()=>[b(l,{prop:"username"},{default:v((()=>[b(s,{modelValue:n.username,"onUpdate:modelValue":o[0]||(o[0]=e=>n.username=e),placeholder:"请输入账号","prefix-icon":P(w)},null,8,["modelValue","prefix-icon"])])),_:1}),b(l,{prop:"password"},{default:v((()=>[b(s,{modelValue:n.password,"onUpdate:modelValue":o[1]||(o[1]=e=>n.password=e),type:"password",placeholder:"请输入登录密码","prefix-icon":P(C)},null,8,["modelValue","prefix-icon"])])),_:1})])),_:1},8,["model","rules"])]),h("div",we,[b(u,{type:"primary",round:"",style:{width:"100%"},onClick:i},{default:v((()=>[Ce])),_:1})])])}}}),[["__scopeId","data-v-25720004"]])},setup(){const e=p(!1),t=L(),a=null==t?void 0:t.appContext.config.globalProperties,o=O(),n=x(),r=j((()=>o.getters.getWebConfig||{}));return{handleSelectQrLogin:()=>{e.value=!e.value},handleLoginSuccess:e=>{ge.setString("expire_at",I().unix()+1*e.expire_in),o.commit("setAuthInfo",e);const{query:t}=a.$router.currentRoute.value,r=t&&t.redirect||"";n.replace({path:r||fe.BASE_HOME})},isQr:e,webConfig:r}}}),xe={class:"page-login"},je={class:"login-left"},Le={class:"login-main"},Ie={class:"login-main-footer"},Te={href:"https://beian.miit.gov.cn/",target:"_blank"};var Ee=_e(Oe,[["render",function(e,t,a,o,n,r){const i=S("CLoginForm");return k(),f("div",xe,[h("div",je,[h("div",Le,[b(i,{onOnSuccess:e.handleLoginSuccess,logo:e.webConfig.web_logo},null,8,["onOnSuccess","logo"])]),h("div",Ie,[h("a",Te,T(e.webConfig.icp),1)])])])}],["__scopeId","data-v-4763dace"]]);const Me=e=>(E("data-v-0485d9ce"),e=e(),M(),e),Ae={class:"home cb-p-20"},ze=Me((()=>h("div",{class:"home-title"},[y(" 剩余余额 （"),h("a",{href:"https://gpt-link.com/combo",target:"_blank",style:{color:"red"}},"去充值"),y("）")],-1))),Re={class:"home-value"},Ve=Me((()=>h("div",{class:"home-title"}," 已消耗次数 ",-1))),$e={class:"home-value"},De=Me((()=>h("div",{class:"home-title"}," 注册用户数",-1))),Ue={class:"home-value"},qe=Me((()=>h("div",{class:"home-title"}," 支付金额",-1))),Be={class:"home-value"};var Fe=_e(d({__name:"home",setup(e){const t=p({}),a=p({});g((()=>{o(),n()}));const o=()=>{Lt().user.getDevelopPackage().then((({err_code:e,data:a})=>{e||(t.value=a)})).catch((e=>{}))},n=()=>{Lt().user.getStatistics({type:["member_count","payment_count"]}).then((({err_code:e,data:t})=>{e||(a.value=t)})).catch((e=>{}))};return(e,o)=>{const n=S("el-card"),r=S("el-col"),i=S("el-row");return k(),f("div",Ae,[b(i,{gutter:12},{default:v((()=>[b(r,{span:6},{default:v((()=>[b(n,{shadow:"never"},{default:v((()=>[ze,h("div",Re,T(t.value.num-t.value.used)+" 次 ",1)])),_:1})])),_:1}),b(r,{span:6},{default:v((()=>[b(n,{shadow:"never"},{default:v((()=>[Ve,h("div",$e,T(t.value.used)+" 次 ",1)])),_:1})])),_:1}),b(r,{span:6},{default:v((()=>[b(n,{shadow:"never"},{default:v((()=>[De,h("div",Ue,T(a.value.member_count),1)])),_:1})])),_:1}),b(r,{span:6},{default:v((()=>[b(n,{shadow:"never"},{default:v((()=>[qe,h("div",Be,T(a.value.payment_count)+" 元",1)])),_:1})])),_:1})])),_:1})])}}}),[["__scopeId","data-v-0485d9ce"]]);const Ne={path:"/:path(.*)*",name:"PageNotFound",component:pe,meta:{title:"ErrorPage",hideMenu:!0},children:[{path:"/:path(.*)*",name:"PageNotFound",component:()=>de((()=>import("./error.076b68bf.js")),["assets/error.076b68bf.js","assets/error.e07711cc.css","assets/vendor.619b4049.js","assets/index.3d225aa2.js","assets/index.8f66a87b.css"]),meta:{title:"ErrorPage"}}]},We={path:"/operate",redirect:"/operate/member/index",component:pe,meta:{title:"运营",icon:"cb-iconfont cb-icon-people_fill"},children:[{path:"member",component:me(),meta:{title:"用户管理"},children:[{path:"index",component:()=>de((()=>import("./index.611d9f30.js")),["assets/index.611d9f30.js","assets/index.9ee114db.css","assets/index.3d225aa2.js","assets/index.8f66a87b.css","assets/vendor.619b4049.js","assets/useBasicTable.a76b62f5.js","assets/useDialog.509a327c.js","assets/useBasicForm.5b487d24.js"]),meta:{title:"用户列表"}},{path:"order",component:()=>de((()=>import("./index.8f165a45.js")),["assets/index.8f165a45.js","assets/index.3d225aa2.js","assets/index.8f66a87b.css","assets/vendor.619b4049.js","assets/userSelect.c00bbc84.js"]),meta:{title:"订单列表"}}]},{path:"marketing",component:me(),meta:{title:"运营管理"},children:[{path:"package",component:()=>de((()=>import("./index.d335399a.js")),["assets/index.d335399a.js","assets/index.c1df4d05.css","assets/vendor.619b4049.js","assets/index.3d225aa2.js","assets/index.8f66a87b.css","assets/useDialog.509a327c.js","assets/useBasicForm.5b487d24.js"]),meta:{title:"套餐管理"}},{path:"model",component:()=>de((()=>import("./index.65324c31.js")),["assets/index.65324c31.js","assets/index.2dd0807f.css","assets/index.3d225aa2.js","assets/index.8f66a87b.css","assets/vendor.619b4049.js","assets/useDialog.509a327c.js","assets/useBasicForm.5b487d24.js","assets/useBasicTable.a76b62f5.js"]),meta:{title:"模型/角色管理"}},{path:"task",component:()=>de((()=>import("./index.f0a08196.js")),["assets/index.f0a08196.js","assets/index.5617b7c4.css","assets/vendor.619b4049.js","assets/index.3d225aa2.js","assets/index.8f66a87b.css","assets/useDialog.509a327c.js","assets/useBasicForm.5b487d24.js"]),meta:{title:"任务配置"}},{path:"send",component:()=>de((()=>import("./list.c47c51d7.js")),["assets/list.c47c51d7.js","assets/index.3d225aa2.js","assets/index.8f66a87b.css","assets/vendor.619b4049.js","assets/userSelect.c00bbc84.js"]),meta:{title:"任务完成记录"}}]}]};var Ge=Object.freeze(Object.defineProperty({__proto__:null,default:We},Symbol.toStringTag,{value:"Module"}));const He={path:"/marketing",redirect:"/marketing/system/config",component:pe,meta:{title:"系统配置",icon:"cb-iconfont cb-icon-manage_fill"},children:[{path:"system",component:me(),meta:{title:"系统配置"},children:[{path:"config",component:()=>de((()=>import("./index.a4d81fe5.js")),["assets/index.a4d81fe5.js","assets/index.24161b32.css","assets/index.3d225aa2.js","assets/index.8f66a87b.css","assets/vendor.619b4049.js","assets/useBasicForm.5b487d24.js"]),meta:{title:"系统配置"}}]}]};var Ye=Object.freeze(Object.defineProperty({__proto__:null,default:He},Symbol.toStringTag,{value:"Module"}));const Je=function(){const e={"../routes/modules/operate.ts":Ge,"../routes/modules/systen.ts":Ye},t=[];return Object.keys(e).forEach((a=>{const o=e[a];t.push(o.default||o)})),t}(),Xe=[Ne,...Je],Qe=[{name:"login",path:"/login/:platform?",component:Ee,meta:{auth:!1}},{path:"/",name:"root",component:pe,meta:{title:"首页"},children:[{path:"",component:Fe}]},...Je,Ne],Ze={id:"id",children:"children",pid:"pid"},Ke=e=>Object.assign({},Ze,e);function et(e,t,a={}){const o=(a=Ke(a)).children;return function e(a){return a.map((e=>c({},e))).filter((a=>(a[o]=a[o]&&e(a[o]),t(a)||a[o]&&a[o].length)))}(e)}function tt(e,t){return e.map((e=>at(e,t)))}function at(e,{children:t="children",conversion:a}){const o=Array.isArray(e[t])&&e[t].length>0,n=a(e)||{};return o?u(c({},n),{[t]:e[t].map((e=>at(e,{children:t,conversion:a})))}):c({},n)}function ot(e){return"function"==typeof e}function nt(e,t=""){var a,o,n;for(let r=0;r<e.length;r++){const i=e[r];i.path.startsWith("/")||(n=i.path,/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+(?::\d+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/.test(n))||(i.path=`${t}/${i.path}`),(null==(a=null==i?void 0:i.children)?void 0:a.length)&&nt(i.children,(null==(o=i.meta)?void 0:o.hidePathForChildren)?t:i.path)}}function rt(e){const{menu:t}=e,a=[t];return nt(a),a[0]}function it(e,t){const a=function(e,t,a={}){a=Ke(a);const o=[],n=[...e],r=new Set,{children:i}=a;for(;n.length;){const e=n[0];if(r.has(e))o.pop(),n.shift();else if(r.add(e),e[i]&&n.unshift(...e[i]),o.push(e),t(e))return o}return null}(e,(e=>e.path===t));return(a||[]).map((e=>e.path))}var st={namespace:!0,state:()=>({permCodeList:["1000","2000"],backRouterList:[],frontMenuList:[]}),getters:{getPermCodeList:e=>e.permCodeList,getBackRouterList:e=>e.backRouterList,getFrontMenuList:e=>e.frontMenuList},mutations:{setPermCodeList(e,t){e.permCodeList=t},setBackRouterList(e,t){e.backRouterList=t},setFrontMenuList(e,t){e.frontMenuList=t}},actions:{async buildRoutesAction({commit:e}){let t=[];const a=e=>{const{meta:t}=e,{roles:a}=t||{};return!0},o=e=>{const{meta:t}=e,{ignoreRoute:a}=t||{};return!a};t=et(Xe,a),t=t.filter(a);const n=function(e,t=!1){const a=A(e),o=[];a.forEach((e=>{var a,n;if(t&&e.meta.hideChildrenInMenu&&"string"==typeof e.redirect&&(e.path=e.redirect),null==(a=e.meta)?void 0:a.single){const t=null==(n=null==e?void 0:e.children)?void 0:n[0];t&&o.push(t)}else o.push(e)}));const n=tt(o,{conversion:e=>{const{meta:{title:t,hideMenu:a=!1}={}}=e;return c(u(c({},e.meta||{}),{meta:e.meta,name:t,hideMenu:a,path:e.path}),e.redirect?{redirect:e.redirect}:{})}});return nt(n),A(n)}(t,!0);return t=et(t,o),t=t.filter(o),n.sort(((e,t)=>{var a,o;return((null==(a=e.meta)?void 0:a.orderNo)||0)-((null==(o=t.meta)?void 0:o.orderNo)||0)})),e("setFrontMenuList",n),t}}},lt=Object.freeze(Object.defineProperty({__proto__:null,default:st},Symbol.toStringTag,{value:"Module"})),ct={namespace:!0,state:()=>({auth:null,userInfo:{}}),getters:{getAge:e=>e.userInfo.age,getAuth:e=>e.auth,getUserInfo:e=>e.userInfo.user||{}},mutations:{setState(e,[t,a]){e[t]=a},setAuthInfo(e,t){e.auth=t,ge.remove("user_auth_info"),ge.setObject("user_auth_info",t)},logout(e){ge.remove("user_auth_info"),ge.remove("expire_at"),e.auth=null}},actions:{setUserInfo(e,t){e.commit("setState",["userInfo",t])},initUserState(e){const t=ge.getObject("user_auth_info");t&&e.commit("setAuthInfo",t)},async getUserInfo(e,t){const{isForced:a,callback:o}=t||{};if(!ge.getObject("user_auth_info")||a)try{o&&o()}catch(n){z.error(n.message||"用户信息加载失败！")}else e.commit("setState",["userInfo",ge.getObject("user_auth_info")]),o&&o()}}},ut=Object.freeze(Object.defineProperty({__proto__:null,default:ct},Symbol.toStringTag,{value:"Module"})),dt={namespace:!0,state:()=>({menuIsCollapse:!1,webConfig:{}}),getters:{getWebConfig:e=>e.webConfig||{}},mutations:{closeOpenMenuCollapse(e){e.menuIsCollapse=!e.menuIsCollapse},setWebConfigState(e,t){e.webConfig=t}}},pt=Object.freeze(Object.defineProperty({__proto__:null,default:dt},Symbol.toStringTag,{value:"Module"}));const mt={},gt={"./modules/model.ts":ce,"./modules/permission.ts":lt,"./modules/user.ts":ut,"./modules/web.ts":pt};Object.keys(gt).forEach((e=>{const t=gt[e],a=e.split("/").splice(-1).shift().replace(".ts","");mt[a]=t.default||t}));const ft=R({modules:mt}),ht=fe.BASE_LOGIN;const _t=V({history:$("/admin"),strict:!0,scrollBehavior:()=>({left:0,top:0}),routes:Qe});_t.beforeEach(((e,t,a)=>!1===e.meta.auth?a():function(e,t){const a=ft.state.user;a.auth||ft.dispatch("initUserState");const o=ge.getString("expire_at");if(!o||I().unix()>parseInt(o)||!a.auth){const a={path:ht,replace:!0};return t.path&&(a.query=u(c({},a.query),{redirect:t.path})),z.error("登录已失效，请重新登录"),e(a)}return e()}(a,e)));const bt=fe.BASE_LOGIN,vt=D.create({baseURL:null==(e="/api/")?void 0:e.toString(),timeout:3e4});vt.interceptors.request.use((e=>{const t=ft.state,a={auth:ge.getObject("user_auth_info")||null},o=t.user;if(e.headers.common["X-Requested-With"]="XMLHttpRequest",o&&(o.auth||a.auth)){const{access_token:t,token_type:n}=o.auth||{},{access_token:r,token_type:i}=a.auth||{};e.headers.common.Authorization=(n||i)+" "+(t||r)}return"get"===e.method&&(e.url=e.url+"?"+U.stringify(e.params),e.params={}),"post"!==e.method&&"delete"!==e.method&&"put"!==e.method||(e.data=c({},e.data)),e}),(e=>Promise.reject(e))),vt.interceptors.response.use((e=>{const t=e.data;if(t){if(t.err_code){switch(t.err_code){case 200:t.msg=t.err_msg;break;case 401:{const{path:e,query:t}=_t.currentRoute.value||{};_t.replace({path:bt,query:u(c({},t),{redirect:e})});break}case 403:_t.push({path:"/:path(.*)*",query:{status:403}});break;case 404:t.msg="资源不存在";break;default:t.msg}const e=setTimeout((()=>{z.error(t.err_msg||"未知异常，稍后再试吧")}));return Promise.reject({data:t,hideToast(){clearTimeout(e)}})}return Promise.resolve(t)}return Promise.reject(t)}),(e=>{e.response||"string"==typeof e.message&&("Network Error"===e.message?e.error_message="网络异常，稍后再试吧":0===e.message.indexOf("timeout")&&(e.error_message="请求超时，稍后再试吧"));const t=setTimeout((()=>{z.error(e.error_message||"未知异常，稍后再试吧")}));return Promise.reject({error:e,hideToast(){clearTimeout(t)}})}));var yt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){return{orderList:e=>vt.get("/admin/order",{params:e}),packageList:e=>vt.get("/admin/package",{params:e}),savePackage:e=>vt.post("/admin/package",e),packageInfo:e=>vt.get(`/admin/package/${e.id}`,{params:e}),putPackage:e=>vt.put(`/admin/package/${e.id}`,e),putPackageShow:e=>vt.put(`/admin/package/${e.id}/show`,e),getChatGptModel:e=>vt.get("/admin/chat-gpt-model",{params:e}),getChatGptModelInfo:e=>vt.get(`/admin/chat-gpt-model/${e.id}`,{params:e}),saveChatGptModel:e=>vt.post("/admin/chat-gpt-model",e),putChatGptModel:e=>vt.put(`/admin/chat-gpt-model/${e.id}`,e),putChatGptModelStatus:e=>vt.put(`/admin/chat-gpt-model/${e.id}/status`,e),memberList:e=>vt.get("/admin/member",{params:e}),getEnablePackage:e=>vt.get(`/admin/member/${e.user_id}/package`,{params:e}),sendPackage:e=>vt.post(`/admin/member/${e.user_id}/package`,e),getTask:e=>vt.get("/admin/task",{params:e}),getTaskInvite:e=>vt.get("/admin/task/invite",{params:e}),savaTaskInvite:e=>vt.post("/admin/task/invite",e),getTaskRegister:e=>vt.get("/admin/task/register",{params:e}),savaTaskRegister:e=>vt.post("/admin/task/register",e),getTaskShare:e=>vt.get("/admin/task/share",{params:e}),savaTaskShare:e=>vt.post("/admin/task/share",e),updateTaskStatus:e=>vt.put(`/admin/task/${e.type}/status`,e),getTaskList:e=>vt.get("/admin/task/record",{params:e})}}},Symbol.toStringTag,{value:"Module"}));var St=Object.freeze(Object.defineProperty({__proto__:null,default:function(){return{queryToke:e=>vt.get("/admin/qiniu/token",{params:e}),queryPlatformConfig:()=>vt.get("/admin/common/platform-config/qiniu"),setPlatFormConfig:e=>vt.post("/admin/common/platform-config/qiniu",e),getDistrict:()=>vt.get("/merchant/common/district"),getBasicInfo:()=>vt.get("/config/basic-info")}}},Symbol.toStringTag,{value:"Module"}));var kt=Object.freeze(Object.defineProperty({__proto__:null,default:function(e){return{goodsCategory:t=>e.get("/mall/merchant/goods/category",{params:t})}}},Symbol.toStringTag,{value:"Module"}));var Pt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){return{businessAdd:e=>vt.post("/admin/business",e),businessList:e=>vt.get("/admin/business",{params:e}),businessPut:e=>vt.put(`/admin/business/${e.id}`,e),businessInfo:e=>vt.get(`/admin/business/${e.id}`,{params:e}),businessDel:e=>vt.delete(`/admin/business/${e.id}`,{params:e}),copyModel:e=>vt.post(`/admin/chat-gpt-model/${e.id}/copy-gpt`,e),modelTop:e=>vt.post(`/admin/chat-gpt-model/${e.id}/top`,e),cancelTop:e=>vt.post(`/admin/chat-gpt-model/${e.id}/cancel-top`,e)}}},Symbol.toStringTag,{value:"Module"}));var wt=Object.freeze(Object.defineProperty({__proto__:null,default:function(){return{openConfig:e=>vt.post(`/admin/config/${e.type}`,e),getConfig:e=>vt.get(`/admin/config/${e.type}`,{params:e})}}},Symbol.toStringTag,{value:"Module"}));var Ct=Object.freeze(Object.defineProperty({__proto__:null,default:function(){return{materialList:e=>vt.get("/admin/material",{params:e}),materialSave:e=>vt.post("/admin/material",e),materialDel:e=>vt.delete(`/admin/material/${e.id}`)}}},Symbol.toStringTag,{value:"Module"}));var Ot=Object.freeze(Object.defineProperty({__proto__:null,default:function(){return{login:e=>vt.post("/admin/login",e),developList:e=>vt.get("/admin/develop",{params:e}),getUserDisabledRecord:e=>vt.get("/admin/member/disabled/record",{params:e}),getUserDisabledUnlock:e=>vt.put(`/admin/member/${e.id}/unlock`,e),getRecordList:e=>vt.get(`/admin/member/${e.id}/record`,{params:e}),getUserDisabledReject:e=>vt.put(`/admin/member/${e.id}/reject`,e),getUserDisabledDisabled:e=>vt.put(`/admin/member/${e.id}/disabled`,e),getPackageRecord:e=>vt.get("/admin/member/package/record",{params:e}),getDevelopPackage:e=>vt.get("/admin/develop/package",{params:e}),getStatistics:e=>vt.get("/admin/statistics/count",{params:e})}}},Symbol.toStringTag,{value:"Module"}));const xt=fe.BASE_LOGIN,jt=D.create({baseURL:null==(t={VITE_CHATGPT_BASE_URL:"/api/",VITE_CHATGPT_QINIU_MODE:"dev",BASE_URL:"/admin/",MODE:"production",DEV:!1,PROD:!0}.VITE_BASE_URL)?void 0:t.toString(),timeout:3e4});jt.interceptors.request.use((e=>{const t=ft.state,a={auth:ge.getObject("user_auth_info")||null},o=t.user;if(e.headers.common["X-Requested-With"]="XMLHttpRequest",o&&(o.auth||a.auth)){const{access_token:t,token_type:n}=o.auth||{},{access_token:r,token_type:i}=a.auth||{};e.headers.common.Authorization=(n||i)+" "+(t||r)}return"get"===e.method&&(e.url=e.url+"?"+U.stringify(e.params),e.params={}),"post"!==e.method&&"delete"!==e.method&&"put"!==e.method||(e.data=c({},e.data)),e}),(e=>Promise.reject(e))),jt.interceptors.response.use((e=>{const t=e.data;if(t){if(t.err_code){switch(t.err_code){case 200:t.msg=t.err_msg;break;case 401:{const{path:e,query:t}=_t.currentRoute.value||{};_t.replace({path:xt,query:u(c({},t),{redirect:e})});break}case 403:_t.push({path:"/:path(.*)*",query:{status:403}});break;case 404:t.msg="资源不存在";break;default:t.msg}const e=setTimeout((()=>{z.error(t.err_msg||"未知异常，稍后再试吧")}));return Promise.reject({data:t,hideToast(){clearTimeout(e)}})}return Promise.resolve(t)}return Promise.reject(t)}),(e=>{e.response||"string"==typeof e.message&&("Network Error"===e.message?e.error_message="网络异常，稍后再试吧":0===e.message.indexOf("timeout")&&(e.error_message="请求超时，稍后再试吧"));const t=setTimeout((()=>{z.error(e.error_message||"未知异常，稍后再试吧")}));return Promise.reject({error:e,hideToast(){clearTimeout(t)}})}));var Lt=()=>{const e={},t={"./chatGPT.ts":yt,"./common.ts":St,"./demo.ts":kt,"./model.ts":Pt,"./open.ts":wt,"./resources.ts":Ct,"./user.ts":Ot};return Object.keys(t).forEach((a=>{var o;const n=t[a],r=null==(o=a.split("/").pop())?void 0:o.split(".").shift();e[r]=(n.default||n)(jt)})),e};var It=_e({name:"App",components:{[q.name]:q},setup(){g((()=>{a()}));const e=p(!0),t=O();B("pageReload",(()=>{e.value=!1,F((()=>{e.value=!0}))}));const a=()=>{Lt().common.getBasicInfo().then((({err_code:e,data:a})=>{e||t.commit("setWebConfigState",a)})).catch((e=>{}))};return{isRouteActive:e,locale:N}}},[["render",function(e,t,a,o,n,r){const i=S("router-view"),s=S("el-config-provider");return k(),W(s,{locale:o.locale},{default:v((()=>[o.isRouteActive?(k(),W(i,{key:0})):_("",!0)])),_:1},8,["locale"])}],["__scopeId","data-v-5988093d"]]);function Tt(e,t,a){return t.split(".").reduce(((e,t)=>t&&e&&e[t]?e[t]:void 0),e)||a}const Et=(e=!0,t=!0,a=10,o=16)=>{const n=["0","1","2","3","4","5","6","7","8","9",...e?[]:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]];let r="",i="",s=a;t&&(s=Math.round(Math.random()*(o-a))+a);for(let l=0;l<s;l++)i=Math.round(Math.random()*(n.length-1)),r+=n[i];return r},Mt=Lt();var At=e=>new Promise((t=>{const a="dev/image/"+I().format("YYYYMMDDhhmmss")+"-"+Et()+e.name.match(/(\.\w+)$/)[1];Mt.common.queryToke({path:a,expired_time:300}).then((o=>zt(e,a,o.data.token).then((a=>{let n=a.key;0===e.type.indexOf("image")&&(n=((e,t=1920,a)=>e&&e.includes("cdn.")?e.includes("imageView2")||e.startsWith("data:")?e:(e.includes("?")?e+="&":e+="?",t&&!a?e+`imageView2/2/w/${t}`:!t&&a?e+`imageView2/2/h/${a}`:t&&a?e+`imageView2/2/w/${t}/h/${a}`:void 0):e)(n)||n),t(o.data.domain+"/"+n)})))).catch((e=>{}))}));const zt=(e,t,a,o)=>new Promise(((n,r)=>{G(e,t,a).subscribe({next(e){o&&o(e)},error(e){r(e)},complete(e){n(e)}})}));const Rt=d({name:"CBEditor",props:{initialHeight:{type:Number,default:320},placeholder:{type:String,default:"请输入正文"},showLinkImg:{type:Boolean,default:!1},excludeMenus:{type:Array,default:()=>["head","bold","fontSize","fontName","italic","underline","strikeThrough","indent","lineHeight","foreColor","backColor","link","list","todo","justify","quote","emoticon","image","table","code","splitLine","undo","redo"]},value:{type:String},modelValue:{type:String},customInsertImage:{type:Boolean,default:!1}},emits:["update:value","change"],setup(e,{emit:t}){const a=m({id:"editor"+Math.random().toString().slice(-1),editor:null});H((()=>{var t;a.editor?(t=e.modelValue||e.value)!==a.editor.txt.html()&&(a.editor.txt.html(t),t||a.editor.txt.clear()):n()}));const o=j({get:()=>({height:e.initialHeight,placeholder:e.placeholder,menus:e.excludeMenus,showLinkImg:e.showLinkImg})});function n(){F((()=>{a.editor=new X("#"+a.id),a.editor.config=c(c({},a.editor.config),o.value),a.editor.config.zIndex=99,a.editor.config.uploadImgMaxLength=1,a.editor.config.customUploadImg=(e,t)=>{!function(e,t){const a=e[0];if(a&&a instanceof File){if(!(/^image\/gif$/.test(a.type)||/^image\/jpeg$/.test(a.type)||/^image\/png$/.test(a.type)))return void z.warning("目前仅支持上传格式为 gif, jpg, png 格式的图片文件");if(a.size/1024/1024>10)return void z.warning("目前仅支持上传大小为 10 MB 以内的图片");At(a).then((e=>{t(e)}))}}(e,t)},a.editor.config.onchange=e=>{t("change",e),t("update:value",e)},a.editor.config.onchangeTimeout=500,a.editor.create()}))}return Y((()=>{a.editor.destroy(),a.editor=null})),u(c({},J(a)),{initEditor:n})}}),Vt={class:"cb-wang-editor"},$t=["id"];var Dt=_e(Rt,[["render",function(e,t,a,o,n,r){return k(),f("div",Vt,[h("div",{id:e.id},null,8,$t)])}]]),Ut=Object.freeze(Object.defineProperty({__proto__:null,default:Dt},Symbol.toStringTag,{value:"Module"}));const qt=d({name:"CbPageWrapper",props:{title:{type:String,default:""}},setup:()=>({})}),Bt={class:"page-index"};var Ft=_e(qt,[["render",function(e,t,a,o,n,r){const i=S("el-page-header");return k(),f(Z,null,[e.title?(k(),W(i,{key:0,title:e.title,icon:""},null,8,["title"])):_("",!0),h("div",Bt,[Q(e.$slots,"default")])],64)}]]),Nt=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"}));var Wt=_e({props:{modelValue:{type:[Array,String],default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const a=L(),{proxy:o}=a;null==a||a.appContext.config.globalProperties;const n=p([]);return g((()=>{o.$api.common.getDistrict().then((({data:e})=>{n.value=e}))})),{cascaderProps:{label:"name",children:"districts",value:"name"},districts:n,change:e=>{t("update:modelValue",e)}}}},[["render",function(e,t,a,o,n,r){const i=S("el-cascader");return k(),f("div",null,[b(i,{options:o.districts,"model-value":a.modelValue,clearable:"",props:o.cascaderProps,style:{width:"400px"},onChange:o.change},null,8,["options","model-value","props","onChange"])])}]]),Gt=Object.freeze(Object.defineProperty({__proto__:null,default:Wt},Symbol.toStringTag,{value:"Module"}));const Ht={class:"cb-flex attribute-types"},Yt=["onClick"];var Jt=_e(d({__name:"index",props:{modelValue:{type:[Number,String,Array],default:1},tabs:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup:(e,{emit:t})=>(a,o)=>(k(),f("div",Ht,[(k(!0),f(Z,null,K(e.tabs,((a,o)=>(k(),f("div",{class:ee(["type-item",{active:e.modelValue===a.value,disabled:a.disabled}]),key:o,onClick:e=>(e=>{e.disabled||(t("update:modelValue",e.value),t("change",e.value))})(a)},T(a.name),11,Yt)))),128))]))}),[["__scopeId","data-v-df136fc6"]]),Xt=Object.freeze(Object.defineProperty({__proto__:null,default:Jt},Symbol.toStringTag,{value:"Module"}));const Qt=d({name:"CbTable",props:{api:{type:Function,required:!1},params:{type:Object,default:()=>({})},pageSize:{type:Number,default:20},dataPath:{type:String,default:""},dataProcess:{type:Function,default:e=>e},showSelector:{type:Boolean,default:!1},showPagination:{type:Boolean,default:!0},exportConfig:{type:Object},showFilterBtns:{type:Boolean,default:!0}},emits:["selectionChange","localDataSource","update:params"],setup(e,t){const a=p(null),o=m({localLoading:!1,localDataSource:[],currentPage:1,currentPageSize:20,totalItem:0,selections:[]});async function n(){if(o.localLoading=!0,!e.api)return o.localLoading=!1,void(o.localDataSource=e.dataProcess());const a=await e.api(Object.assign({},e.params,{page:o.currentPage,per_page:o.currentPageSize})).finally((()=>{o.localLoading=!1}));o.totalItem=Tt(a,e.dataPath+"meta.total",0);const n=Tt(a,(e.dataPath?e.dataPath+".":"")+"data",[]);let r=e.dataProcess(n);Array.isArray(r)||(r=[]),e.showPagination&&r.length,o.localDataSource=r,t.emit("localDataSource",o.localDataSource)}function r(e){e&&(o.currentPage=1),n()}async function i(t){const a=new te.exports.Workbook;a.creator="管理员",a.lastModifiedBy=e.exportConfig.lastModifiedBy||"积分商城后台管理";const o=a.addWorksheet("Sheet1"),n="function"==typeof e.exportConfig.callback?await e.exportConfig.callback(t):[];o.addRows(n),a.xlsx.writeBuffer().then((t=>{const a=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"});ae.exports.saveAs(a,e.exportConfig.fileName||"导出.xlsx")}))}return H((()=>{o.currentPageSize=e.pageSize})),n(),u(c({cbTable:a},J(o)),{handleSizeChange:function(e){void 0!==e&&(o.currentPageSize=e,r())},currentChange:function(e){o.currentPage=e,n()},refresh:r,resetParams:function(){let a=e.params;Object.keys(a).forEach((e=>{a[e]=""})),t.emit("update:params",a),F((()=>{r(!0)}))},onExportItem:function(t){switch(t){case"selected":i(o.selections);break;case"currentPage":i(o.localDataSource);break;default:{const t=e.exportConfig.exportAll;"function"==typeof t&&t()}}},handleSelectionChange:function(e){o.selections=e,t.emit("selectionChange",e)}})}}),Zt={key:0,class:"filter-btns"},Kt=y("导出"),ea=y("导出选中项"),ta=y("导出当前页"),aa=y("导出全部"),oa=y("筛选"),na=y("重置");var ra=_e(Qt,[["render",function(e,t,a,o,n,r){const i=S("el-button"),s=S("el-dropdown-item"),l=S("el-dropdown-menu"),c=S("el-dropdown"),u=S("el-table-column"),d=S("el-table"),p=S("el-pagination"),m=oe("loading");return k(),f("div",null,[e.showFilterBtns||e.exportConfig?(k(),f("div",Zt,[e.exportConfig?(k(),W(c,{key:0,style:{"margin-right":"10px"}},{dropdown:v((()=>[b(l,null,{default:v((()=>[b(s,{disabled:0===e.selections.length,onClick:t[0]||(t[0]=t=>e.onExportItem("selected"))},{default:v((()=>[ea])),_:1},8,["disabled"]),b(s,{disabled:0===e.localDataSource.length,onClick:t[1]||(t[1]=t=>e.onExportItem("currentPage"))},{default:v((()=>[ta])),_:1},8,["disabled"]),e.exportConfig.exportAll?(k(),W(s,{key:0,onClick:e.onExportItem},{default:v((()=>[aa])),_:1},8,["onClick"])):_("",!0)])),_:1})])),default:v((()=>[b(i,{icon:"el-icon-download",type:"success",size:"mini"},{default:v((()=>[Kt])),_:1})])),_:1})):_("",!0),e.showFilterBtns?(k(),W(i,{key:1,type:"primary",size:"mini",onClick:t[2]||(t[2]=t=>e.refresh(!0))},{default:v((()=>[oa])),_:1})):_("",!0),e.showFilterBtns?(k(),W(i,{key:2,size:"mini",onClick:e.resetParams},{default:v((()=>[na])),_:1},8,["onClick"])):_("",!0)])):_("",!0),ne((k(),W(d,re({data:e.localDataSource,class:"cb-table",onSelectionChange:e.handleSelectionChange,ref:"cbTable",border:""},e.$attrs),{default:v((()=>[e.showSelector?(k(),W(u,{key:0,type:"selection",width:"55"})):_("",!0),Q(e.$slots,"default")])),_:3},16,["data","onSelectionChange"])),[[m,e.localLoading]]),e.showPagination?(k(),W(p,{key:1,class:"cb-table-pagination",onCurrentChange:e.currentChange,onSizeChange:e.handleSizeChange,"current-page":e.currentPage,"onUpdate:current-page":t[3]||(t[3]=t=>e.currentPage=t),layout:"total, sizes, prev, pager, next",total:e.totalItem,"page-size":e.currentPageSize},null,8,["onCurrentChange","onSizeChange","current-page","total","page-size"])):_("",!0)])}]]),ia=Object.freeze(Object.defineProperty({__proto__:null,default:ra},Symbol.toStringTag,{value:"Module"}));const sa=d({props:{modelValue:{type:Array,default:()=>[]},accept:{default:".gif,.jpg,.jpeg,.png",type:String},maxSize:{default:10,type:Number},maxCount:{default:0,type:Number},hint:{type:String},value:{type:Array,default:()=>[]},showHint:{type:Boolean,default:!0},namespace:{type:String,default:""}},emits:["change","uploading","onUpdate:modelValue"],setup(e,{emit:t}){const a=L(),o=null==a?void 0:a.appContext.config.globalProperties,n=m({localFileList:[],dialogVisible:!1,dialogImageUrl:""});return H((()=>{n.localFileList=Array.isArray(e.modelValue)?e.modelValue:Array.isArray(e.value)?e.value:[]})),u(c({},J(n)),{beforeUpload:function(t){if(e.maxSize){if(t.size/1024/1024>e.maxSize)return z.error(`上传的图片大小不能超过 ${e.maxSize} MB`),Promise.reject()}},httpRequest:function(a){const n=a.file,r=I().format("YYYYMMDDhhmmss"),i=Et(),s=n.name.substring(n.name.lastIndexOf(".")),l=e.namespace+"/"+r+"-"+i+s;o.$api.common.queryToke({name:l,expired_time:300}).then((e=>function(e,t,a,o){return new Promise(((n,r)=>{G(e,t,a).subscribe({next(e){o(e)},error(e){r(e)},complete(e){n(e)}})}))}(n,l,e.data.token,(e=>{a.onProgress({percent:e.total.percent}),t("uploading",e)})).then((t=>{const o=e.data.domain;let n=(-1===o.indexOf("https://")&&-1===o.indexOf("http://")?"http://":"")+o+"/"+t.key;a.onSuccess(u(c({},t),{url:n}))})))).catch((e=>{a.onError(e)}))},onPreview:function(e){n.dialogVisible=!0,n.dialogImageUrl=e.url},onRemove:function(e){const a=e.response&&e.response.url||e.url;n.localFileList=n.localFileList.filter((e=>e.url!==a)),t("change",n.localFileList),t("onUpdate:modelValue",n.localFileList)},uploadChange:function(e,a){n.localFileList=a,"success"===e.status&&function(e){let a=e.map((e=>({url:e.url,fileUrl:e.response&&e.response.url||e.fileUrl,status:e.status,name:e.name})));t("change",a),t("onUpdate:modelValue",a)}(a)}})}}),la=h("i",{class:"el-icon-plus"},null,-1),ca={key:0,class:"el-upload__tip"};var ua=_e(sa,[["render",function(e,t,a,o,n,r){const i=S("el-upload"),s=S("el-image"),l=S("el-dialog");return k(),f(Z,null,[b(i,re({class:{cantUpload:e.localFileList.length>=e.maxCount&&0!==e.maxCount},limit:e.maxCount,accept:e.accept,action:"","list-type":"picture-card",ref:"product-image-upload"},e.$attrs,{"file-list":e.localFileList,"before-upload":e.beforeUpload,"http-request":e.httpRequest,"on-preview":e.onPreview,"on-remove":e.onRemove,"on-change":e.uploadChange}),{tip:v((()=>[e.showHint?(k(),f("div",ca,[e.hint?(k(),f(Z,{key:0},[y(T(e.hint)+"，",1)],64)):_("",!0),y("只能上传 "+T(e.accept)+" 文件，且不超过 "+T(e.maxSize)+"MB ",1)])):_("",!0)])),default:v((()=>[la])),_:1},16,["class","limit","accept","file-list","before-upload","http-request","on-preview","on-remove","on-change"]),b(l,{modelValue:e.dialogVisible,"onUpdate:modelValue":t[0]||(t[0]=t=>e.dialogVisible=t)},{default:v((()=>[b(s,{src:e.dialogImageUrl},null,8,["src"])])),_:1},8,["modelValue"])],64)}]]),da=Object.freeze(Object.defineProperty({__proto__:null,default:ua},Symbol.toStringTag,{value:"Module"}));function pa(){return{hasPermission:function(e){const t=ft.getters.getPermCodeList;return ie.exports.isArray(e)?ie.exports.intersection(e,t).length>0:t.includes(e)}}}const ma={mounted:(e,t)=>{!function(e,t){const{hasPermission:a}=pa(),o=t.value;o&&(a(o)||e.parentNode.removeChild(e))}(e,t)}};function ga(e){!function(e){e.directive("auth",ma)}(e)}const fa={default:"https://finch.cdn.cblink.net/common/image-default.jpg"};function ha(e){e.config.globalProperties.$api=Lt();const{hasPermission:t}=pa();e.config.globalProperties.$hasPermission=t,function(e){e.config.globalProperties.$images=fa}(e)}!async function(){const e=se(It);(e=>{const t={"../../components/CbEditor/index.vue":Ut,"../../components/CbPageWrapper/index.vue":Nt,"../../components/CbSelectCity/index.vue":Gt,"../../components/CbTab/index.vue":Xt,"../../components/CbTable/index.vue":ia,"../../components/CbUpload/index.vue":da};Object.keys(t).forEach((a=>{const o=t[a],n=a.split("/").splice(-2).shift();e.component(n,o.default||o)}))})(e),ha(e),e.use(le),e.use(_t),e.use(ft),ft.dispatch("buildRoutesAction"),ga(e),await _t.isReady(),e.mount("#app")}();export{At as U,_e as _,Lt as a,it as g,ot as i,ft as s,rt as t};
