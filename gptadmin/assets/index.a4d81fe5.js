var e=Object.defineProperty,o=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,p=(o,l,a)=>l in o?e(o,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[l]=a,r=(e,o)=>{for(var l in o||(o={}))n.call(o,l)&&p(e,l,o[l]);if(a)for(var l of a(o))t.call(o,l)&&p(e,l,o[l]);return e};import{c as s,f as c}from"./index.3d225aa2.js";import{u as d}from"./useBasicForm.5b487d24.js";import{d as i,r as u,o as m,h as f,i as b,c as g,f as _,w as v,b as h,u as I,ao as y,I as w,az as q,av as P,e as k,g as O,E as j}from"./vendor.619b4049.js";import{_ as C,a as A}from"./index.19e8c00a.js";const V=[{field:"client_id",component:"Input",label:"公众号AppId",required:!0,componentProps:{placeholder:"请输入公众号AppId"}},{field:"client_secret",component:"Input",label:"公众号Secret",required:!0,componentProps:{placeholder:"请输入公众号Secret"}}],x=[{field:"appid",component:"Input",label:"支付公众号AppId",required:!0,componentProps:{placeholder:"请输入公众号AppId"}},{field:"mch_id",component:"Input",label:"微信支付商户号",required:!0,componentProps:{placeholder:"请输入微信支付商户号(MCH_ID)"}},{field:"key",component:"Input",label:"微信支付密钥",required:!0,componentProps:{placeholder:"请输入微信支付密钥(API_KEY)"}}],S=[{field:"enable",component:"Switch",label:"开启短信登录",required:!0},{field:"account",component:"Input",label:"账号",required:!0,componentProps:{placeholder:"请输入账号"}},{field:"password",component:"Input",label:"密码",required:!0,componentProps:{placeholder:"请输入密码"}},{field:"sign",component:"Input",label:"签名",required:!0,componentProps:{placeholder:"请输入签名"}}],z=[{field:"client_id",component:"Input",label:"网站应用AppId",required:!0,componentProps:{placeholder:"请输入应用AppId"}},{field:"client_secret",component:"Input",label:"网站应用Secret",required:!0,componentProps:{placeholder:"请输入应用Secret"}}],F=[{field:"secret_key",component:"Input",label:"api密钥",required:!0,componentProps:{placeholder:"请输入api密钥"}},{field:"icp",component:"Input",label:"网站底部icp备案号",required:!1,componentProps:{placeholder:"请输入icp备案号"}},{field:"web_logo",component:"Input",label:"用户端LOGO",required:!1,slot:"web_logo"},{field:"admin_logo",component:"Input",label:"管理端LOGO",required:!1,slot:"admin_logo"}],R=[{field:"title",component:"Input",label:"协议标题",required:!0,componentProps:{placeholder:"请输入协议标题"}},{field:"agreement",component:"Input",label:"协议内容",required:!0,slot:"agreement"}];const U={class:"cb-page open"},D={class:"cb-m-b-40"},E={class:"open-upload cb-flex"},L=["src"],G={key:2,class:"open-upload-mask"},T={class:"open-upload cb-flex"},B=["src"],H={key:2,class:"open-upload-mask"},K={class:"cb-m-l-60"},M=O("确认");var Y=C(i({__name:"index",setup(e){const a=u("5"),n=u([{value:"5",name:"api接口密钥"},{value:"1",name:"微信公众号"},{value:"3",name:"微信网站应用"},{value:"2",name:"微信支付"},{value:"4",name:"创蓝短信配置"},{value:"6",name:"协议配置"}]),{register:t,validate:p,setFieldsValue:i,resetFields:O,setProps:C}=d({options:{labelCol:{span:6},wrapperCol:{span:6}},schemas:F});m((()=>{N()}));const Y=e=>{O();C({schemas:{1:V,2:x,3:z,4:S,5:F,6:R}[e]}),setTimeout((()=>{N()}),50)},J=async()=>{try{const e=await p(),o={type:a.value,config:r({},e)};e.agreement&&(o.config={agreements:r({},e)});const{err_code:l}=await A().open.openConfig(o);l||j.success("保存成功")}catch(e){}},N=async()=>{try{const{data:t}=await A().open.getConfig({type:a.value});"5"===a.value&&(t.config=(e=r({},t.config),n={admin_logo:t.config.admin_logo,web_logo:t.config.web_logo},o(e,l(n)))),i(r({},t.config))}catch(t){}var e,n},Q=async(e,o)=>{const l=await X(e);i({[o]:l})},W=e=>{i({[e]:""})},X=e=>new Promise(((o,l)=>{let a=new FileReader;a.readAsDataURL(e),a.onload=e=>{o(e.target.result)}}));return(e,o)=>{const l=f("CbTab"),p=f("el-icon"),r=f("el-button"),d=f("el-card");return b(),g("div",U,[_(d,{class:"open-main"},{default:v((()=>[h("div",D,[_(l,{tabs:n.value,modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e),onChange:Y},null,8,["tabs","modelValue"])]),_(I(s),{onRegister:I(t)},{web_logo:v((({model:e,field:l})=>[_(I(y),{"show-file-list":!1,"http-request":()=>{},"before-upload":e=>Q(e,"web_logo")},{default:v((()=>[h("div",E,[e[l]?(b(),g("img",{key:0,src:e[l],class:"open-upload-img"},null,8,L)):(b(),w(p,{key:1,class:"avatar-uploader-icon",size:30},{default:v((()=>[_(I(q))])),_:1})),e[l]?(b(),g("div",G,[_(p,{color:"#fff",class:"open-upload-del",size:26,onClick:o[1]||(o[1]=e=>W("web_logo"))},{default:v((()=>[_(I(P))])),_:1})])):k("",!0)])])),_:2},1032,["http-request","before-upload"])])),admin_logo:v((({model:e,field:l})=>[_(I(y),{"show-file-list":!1,"http-request":()=>{},"before-upload":e=>Q(e,"admin_logo")},{default:v((()=>[h("div",T,[e[l]?(b(),g("img",{key:0,src:e[l],class:"open-upload-img"},null,8,B)):(b(),w(p,{key:1,class:"avatar-uploader-icon",size:30},{default:v((()=>[_(I(q))])),_:1})),e[l]?(b(),g("div",H,[_(p,{color:"#fff",class:"open-upload-del",size:26,onClick:o[2]||(o[2]=e=>W("admin_logo"))},{default:v((()=>[_(I(P))])),_:1})])):k("",!0)])])),_:2},1032,["http-request","before-upload"])])),agreement:v((({model:e,field:o})=>[_(I(c),{modelValue:e[o],"onUpdate:modelValue":l=>e[o]=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["onRegister"]),h("div",K,[_(r,{type:"primary",onClick:J},{default:v((()=>[M])),_:1})])])),_:1})])}}}),[["__scopeId","data-v-735bc90a"]]);export{Y as default};
