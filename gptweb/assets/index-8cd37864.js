import{aH as a,ao as f}from"./index-5a1db7f2.js";function h({url:n,data:o,method:c,headers:e,onDownloadProgress:r,signal:l,beforeRequest:i,afterRequest:s}){const g=t=>f(t)?t:Promise.reject(t),u=t=>(console.log(t),s==null||s(),Promise.reject(t.err_code?t:"您中断了回答，若继续请刷新重试！"));i==null||i(),c=c||"GET";const p=Object.assign(typeof o=="function"?o():o??{},{});return c==="GET"?a.get(n,{params:p,signal:l,onDownloadProgress:r}).then(g,u):a.post(n,p,{headers:e,signal:l,onDownloadProgress:r}).then(g,u)}function d({url:n,data:o,method:c="POST",headers:e,onDownloadProgress:r,signal:l,beforeRequest:i,afterRequest:s}){return h({url:n,method:c,data:o,headers:e,onDownloadProgress:r,signal:l,beforeRequest:i,afterRequest:s})}function _(){return d({url:"/config"})}function j(n){var o;return d({url:"/openai/chat-process",data:{message:n.prompt,last_id:(o=n.options)==null?void 0:o.parentMessageId,model_id:n.system||null,request_id:n.requestId},signal:n.signal,onDownloadProgress:n.onDownloadProgress})}export{_ as a,j as f};
