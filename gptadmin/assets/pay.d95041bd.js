var e=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(a,o,l)=>o in a?e(a,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[o]=l,s=(e,a)=>{for(var o in a||(a={}))t.call(a,o)&&r(e,o,a[o]);if(l)for(var o of l(a))n.call(a,o)&&r(e,o,a[o]);return e};import{c as p,f as c}from"./index.51bc881b.js";import{u as i}from"./useBasicForm.46a82fd8.js";import{_ as d,a as m}from"./index.98ee80ec.js";import{d as u,r as f,o as b,h as g,i as v,c as y,f as _,w as h,b as w,u as P,g as V,E as j,v as I,x as O}from"./vendor.b96c6562.js";const C=[{field:"channel",component:"Select",label:"支付配置",required:!0,componentProps:{options:[{label:"线下支付",value:"offline"},{label:"微信支付",value:"wechat"}]}},{field:"offline",component:"Input",label:"线下支付内容",required:!0,slot:"offline"}],k=[{field:"appid",component:"Input",label:"支付公众号AppId",required:!0,componentProps:{placeholder:"请输入公众号AppId"}},{field:"mch_id",component:"Input",label:"微信支付商户号",required:!0,componentProps:{placeholder:"请输入微信支付商户号(MCH_ID)"}},{field:"key",component:"Input",label:"微信支付密钥",required:!0,componentProps:{placeholder:"请输入微信支付密钥(API_KEY)"}}];const q={class:"cb-page open"},x=(e=>(I("data-v-bb401742"),e=e(),O(),e))((()=>w("div",{style:{"margin-bottom":"10px"}},[V("GPTLink密钥获取："),w("a",{href:"https://gpt-link.com",target:"_blank"},"点此前往")],-1))),U={class:"cb-m-b-40"},A={class:"cb-m-l-60"},E=V("确认");var F=d(u({__name:"pay",setup(e){const l=f("7"),t=f([{value:"7",name:"支付配置"},{value:"2",name:"微信支付"}]),{register:n,validate:r,setFieldsValue:d,resetFields:u,setProps:V}=i({options:{labelCol:{span:6},wrapperCol:{span:6}},schemas:C});b((()=>{F()}));const I=e=>{u();V({schemas:{7:C,2:k}[e]}),setTimeout((()=>{F()}),50)},O=async()=>{try{const e=await r(),a={type:l.value,config:s({},e)};e.agreement&&(a.config={agreements:s({},e)});const{err_code:o}=await m().open.openConfig(a);o||j.success("保存成功")}catch(e){}},F=async()=>{try{const{data:n}=await m().open.getConfig({type:l.value});"5"===l.value&&(n.config=(e=s({},n.config),t={admin_logo:n.config.admin_logo,web_logo:n.config.web_logo},a(e,o(t)))),d(s({},n.config))}catch(n){}var e,t};return(e,a)=>{const o=g("el-card"),r=g("CbTab"),s=g("el-button");return v(),y("div",q,[_(o,null,{default:h((()=>[x])),_:1}),_(o,{class:"open-main"},{default:h((()=>[w("div",U,[_(r,{tabs:t.value,modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),onChange:I},null,8,["tabs","modelValue"])]),_(P(p),{onRegister:P(n)},{agreement:h((({model:e,field:a})=>[_(P(c),{modelValue:e[a],"onUpdate:modelValue":o=>e[a]=o},null,8,["modelValue","onUpdate:modelValue"])])),offline:h((({model:e,field:a})=>[_(P(c),{modelValue:e[a],"onUpdate:modelValue":o=>e[a]=o},null,8,["modelValue","onUpdate:modelValue"])])),_:1},8,["onRegister"]),w("div",A,[_(s,{type:"primary",onClick:O},{default:h((()=>[E])),_:1})])])),_:1})])}}}),[["__scopeId","data-v-bb401742"]]);export{F as default};
